<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ivy Dice</title>
        <link rel="stylesheet" href="styles.css" />
        <style>
            input[type="number"]::-webkit-inner-spin-button,
            input[type="number"]::-webkit-outer-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            input[type="number"] {
                -moz-appearance: textfield;
            }
            #betSlider {
                appearance: none;
                width: 100%;
                height: 16px;
                background: transparent;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 10;
                cursor: pointer;
            }
            #betSlider::-webkit-slider-thumb {
                appearance: none;
                width: 20px;
                height: 20px;
                background: white;
                border-radius: 50%;
                border: 2px solid black;
            }
            #betSlider::-moz-range-thumb {
                width: 20px;
                height: 20px;
                background: white;
                border-radius: 50%;
                border: 2px solid black;
            }
            .bet-x-btn {
                padding: 0.5rem 1rem;
                background-color: #444;
                border: 1px solid #666;
                color: #ddd;
                font-weight: bold;
                transition: background 0.2s;
            }
            .bet-x-btn:hover {
                background-color: #555;
            }
        </style>
    </head>
    <body class="bg-black text-white min-h-screen">
        <!-- Navigation -->
        <nav class="bg-gray-950 border-b border-gray-800 sticky top-0 z-50">
            <div
                class="container mx-auto px-4 py-3 flex justify-between items-center"
            >
                <a href="/" class="text-2xl flex items-center gap-2">
                    <?= icon("dice-6", "w-6 h-6 text-white") ?>
                    <span class="font-bold">Ivy Dice</span>
                </a>
                <div class="flex items-center space-x-4 text-gray-300">
                    <div>
                        Balance:
                        <span class="font-bold"
                            ><span id="userBalance">0.00</span> DICE</span
                        >
                    </div>
                    <details id="account-details" class="relative">
                        <summary
                            class="cursor-pointer font-bold hover:text-gray-200 list-none"
                        >
                            zatynaqe ▼
                        </summary>
                        <div
                            class="absolute right-0 mt-2 w-48 bg-gray-900 rounded-md shadow-lg py-1 z-50 border border-gray-700"
                        >
                            <a
                                href="/dashboard"
                                class="block px-4 py-2 hover:bg-gray-800"
                                >My Account</a
                            >
                            <a
                                href="/dashboard/deposit"
                                class="block px-4 py-2 hover:bg-gray-800"
                                >Deposit</a
                            >
                            <a
                                href="/dashboard/withdraw"
                                class="block px-4 py-2 hover:bg-gray-800"
                                >Withdraw</a
                            >
                            <a
                                href="/settings"
                                class="block px-4 py-2 hover:bg-gray-800"
                                >Settings</a
                            >
                            <hr class="border-gray-700 my-1" />
                            <a
                                href="/logout"
                                class="block px-4 py-2 hover:bg-gray-800"
                                >Logout</a
                            >
                        </div>
                    </details>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <div class="max-w-4xl mx-auto bg-gray-900 p-6 rounded-lg">
                <div class="pb-4">
                    <div
                        class="flex justify-between text-sm mb-3 text-gray-400"
                    >
                        <div>
                            Balance: <?= icon("dice-6", "h-4 w-4 inline
                            align-middle text-gray-400") ?>
                            <span id="betFormBalance">0.00</span>
                        </div>
                        <div>
                            Max Profit: <?= icon("dice-6", "h-4 w-4 inline
                            align-middle text-gray-400") ?>
                            <span id="maxProfit">30,000.00</span>
                        </div>
                    </div>
                    <h2 class="text-xl font-bold text-center">MANUAL BET</h2>
                </div>

                <form id="betform" autocomplete="off">
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <!-- Bet Amount -->
                        <div>
                            <div class="flex">
                                <div class="relative flex-1">
                                    <span
                                        class="absolute left-3 top-1/2 -translate-y-1/2"
                                    >
                                        <?= icon("dice-6", "h-4 w-4
                                        text-gray-400") ?>
                                    </span>
                                    <input
                                        type="number"
                                        id="bet_amount"
                                        name="bet_amount"
                                        class="w-full pl-10 pr-3 py-2 bg-gray-800 border border-gray-700 rounded-l-md text-white placeholder-gray-500 focus:outline-none"
                                        placeholder="Bet"
                                        min="0"
                                        step="0.01"
                                        required
                                    />
                                </div>
                                <button
                                    type="button"
                                    id="halfBetBtn"
                                    class="bet-x-btn"
                                >
                                    1/2
                                </button>
                                <button
                                    type="button"
                                    id="doubleBetBtn"
                                    class="bet-x-btn"
                                >
                                    2X
                                </button>
                                <button
                                    type="button"
                                    id="maxBetBtn"
                                    class="bet-x-btn rounded-r-md"
                                >
                                    MAX
                                </button>
                            </div>
                        </div>

                        <!-- Profit Display -->
                        <div>
                            <div class="flex">
                                <div class="relative flex-1">
                                    <span
                                        class="absolute left-3 top-1/2 -translate-y-1/2"
                                    >
                                        <?= icon("dice-6", "h-4 w-4
                                        text-gray-400") ?>
                                    </span>
                                    <input
                                        type="text"
                                        class="w-full pl-10 pr-3 py-2 bg-gray-800 border border-gray-700 rounded-l-md text-white placeholder-gray-500"
                                        placeholder="Profit"
                                        readonly
                                    />
                                </div>
                                <button
                                    type="button"
                                    class="bet-x-btn rounded-r-md cursor-not-allowed"
                                    disabled
                                >
                                    PROFIT
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Win Chance & Payout -->
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-md p-4 text-center">
                            <h6 class="text-xs text-gray-400 mb-2">
                                WIN CHANCE
                            </h6>
                            <div
                                class="flex flex-row justify-center text-2xl gap-2"
                            >
                                <input
                                    type="number"
                                    id="win_chance"
                                    name="win_chance"
                                    class="w-16 flex bg-transparent text-white text-right focus:outline-none"
                                    min="1"
                                    max="98.02"
                                    step="0.01"
                                    value="49.5"
                                    required
                                />
                                <span class="text-white flex">%</span>
                            </div>
                        </div>

                        <div>
                            <button
                                type="button"
                                class="w-full h-full bg-gray-700 hover:bg-gray-600 rounded-md text-white py-4 text-center"
                            >
                                <div class="text-gray-400">
                                    ROLL
                                    <span class="over_under_txt">UNDER</span>
                                </div>
                                <div class="text-2xl">49.50</div>
                                <div class="text-sm text-gray-400">TO WIN</div>
                            </button>
                        </div>

                        <div
                            class="bg-gray-800 rounded-md p-4 text-center relative"
                        >
                            <h6 class="text-xs text-gray-400 mb-2">PAYOUT</h6>
                            <div
                                class="flex flex-row justify-center text-2xl gap-2"
                            >
                                <input
                                    type="number"
                                    id="payout"
                                    class="w-16 flex bg-transparent text-white text-right focus:outline-none"
                                    min="1"
                                    max="99.0"
                                    step="0.01"
                                    value="2.00"
                                    required
                                />
                                <span class="text-white flex">×</span>
                            </div>
                        </div>
                    </div>

                    <!-- Slider -->
                    <div class="mb-6 relative h-10">
                        <div
                            class="absolute w-full h-4 bg-gray-800 rounded-full overflow-hidden z-0"
                        >
                            <div
                                class="h-full bg-gray-600"
                                id="bet-slider-bg"
                                style="width: 49.5%"
                            ></div>
                        </div>
                        <input
                            type="range"
                            id="betSlider"
                            min="1"
                            max="98.02"
                            step="0.01"
                            value="49.5"
                        />
                    </div>

                    <input
                        type="hidden"
                        id="over_field"
                        name="over_field"
                        value=""
                    />
                    <input
                        type="hidden"
                        id="server_seed_hash"
                        name="server_seed_hash"
                        value="..."
                    />

                    <!-- Submit Button -->
                    <button
                        type="submit"
                        id="betSubmit"
                        class="w-full py-3 border-2 border-gray-500 text-gray-300 rounded-md hover:bg-gray-700 hover:text-white"
                    >
                        Roll Dice
                    </button>
                </form>
            </div>
        </main>

        <script>
            document.addEventListener("click", (e) => {
                const details = document.querySelector("details");
                if (details && !details.contains(e.target)) {
                    details.removeAttribute("open");
                }
            });
            const slider = document.getElementById("betSlider");
            const winChance = document.getElementById("win_chance");
            function updateSliderBar() {
                const percentage = ((winChance.value - 1) / (98.02 - 1)) * 100;
                document.querySelector(".bg-gray-600").style.width =
                    percentage + "%";
            }
            slider.addEventListener("input", (e) => {
                winChance.value = e.target.value;
                updateSliderBar();
            });
            winChance.addEventListener("input", (e) => {
                slider.value = e.target.value;
                updateSliderBar();
            });
            updateSliderBar();
        </script>
    </body>
</html>
